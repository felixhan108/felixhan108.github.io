{"componentChunkName":"component---src-templates-blog-post-js","path":"/note/디지털앨범-만들기/","result":{"data":{"site":{"siteMetadata":{"title":"Minimal Software Developer"}},"markdownRemark":{"id":"4905257f-8ce8-5fb9-8c18-e170102ef300","excerpt":"아이가 생기고 무수히 많은 사진과 비디오가 핸드폰에 쌓였습니다.\nGoogleDrive로 동기화 하며 써봤지만 Standard(200GB)가 넘으면 기분 나쁜 비용이 듭니다.\n집에 있는 1TB…","html":"<blockquote>\n<p>아이가 생기고 무수히 많은 사진과 비디오가 핸드폰에 쌓였습니다.\nGoogleDrive로 동기화 하며 써봤지만 Standard(200GB)가 넘으면 기분 나쁜 비용이 듭니다.\n집에 있는 1TB 하드디스크에 사진을 넣고 신규 사진을 매번 카카오톡으로 가족들과 주고 받기 보단 우리가족만의 앨범을 만들고 싶어서 제작과 함께 글을 기록 합니다.</p>\n</blockquote>\n<h1>작업 순서</h1>\n<p>전체 작업이 한눈에 들어오도록 작업의 순서를 나열 했습니다.</p>\n<ol>\n<li><code class=\"language-text\">PhotoPrism</code> 설치</li>\n<li><code class=\"language-text\">홈서버</code> 만들기</li>\n<li><code class=\"language-text\">Swagger</code> 연결</li>\n<li><code class=\"language-text\">Next.js</code> 설치</li>\n<li><code class=\"language-text\">GithubActions</code>을 이용한 CI/CD 파이프라인 구성</li>\n<li><code class=\"language-text\">DNS</code>, <code class=\"language-text\">SSL</code>연결</li>\n</ol>\n<h1>1.<code class=\"language-text\">PhotoPrism</code> 설치</h1>\n<p>Docker를 이용해 PhotoPrism을 설치합니다.\nDcoker에 공유 되어있는 photoprism을 그대로 쓸거라 간단히 설치가 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3\"</span>\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token key atrule\">photoprism</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> photoprism/photoprism\n\t\t<span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> unless<span class=\"token punctuation\">-</span>stopped\n\t\t<span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n\t\t\t<span class=\"token punctuation\">-</span> <span class=\"token string\">\"2342:2342\"</span>\n\t\t<span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n\t\t\t<span class=\"token key atrule\">PHOTOPRISM_ADMIN_PASSWORD</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"${PHOTOPRISM_ADMIN_PASSWORD}\"</span>\n\t\t\t<span class=\"token key atrule\">PHOTOPRISM_UPLOAD_NSFW</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"false\"</span>\n\t\t<span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n\t\t\t<span class=\"token punctuation\">-</span> ./photos<span class=\"token punctuation\">:</span>/photoprism/originals\n\t\t\t<span class=\"token punctuation\">-</span> ./photoprism<span class=\"token punctuation\">-</span>storage<span class=\"token punctuation\">:</span>/photoprism/storage\n\t\t<span class=\"token key atrule\">networks</span><span class=\"token punctuation\">:</span>\n\t\t\t<span class=\"token punctuation\">-</span> photoprism<span class=\"token punctuation\">-</span>network\n\n<span class=\"token key atrule\">networks</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token key atrule\">photoprism-network</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token key atrule\">driver</span><span class=\"token punctuation\">:</span> bridge</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker-compose</span> up <span class=\"token parameter variable\">-d</span></code></pre></div>\n<h1>2.<code class=\"language-text\">홈서버</code> 만들기</h1>\n<p>홈 서버 제작에 핵심은 나의 집에서 쓰고 있는 인터넷의 <strong>공인 IP</strong>를 확보하는 것입니다.</p>\n<ol>\n<li>사용하고 있는 인터넷 회선의 공인 IP를 획득하는 방법을 검색</li>\n<li>인터넷회사에서 제공해주는 <strong>설정페이지</strong> 에 접속해 내가 만들 서버(PhotoPrism:2342)의 port를 등록</li>\n<li><code class=\"language-text\">http://공인 IP:2342</code>에 접속 합니다.</li>\n</ol>\n<h1>3.<code class=\"language-text\">Swagger</code> 연결</h1>\n<p>가족들에게 미니멀 어플리케이션 사용경험을 전달 하기 위해 FrontEnd를 별도로 만들 계획입니다.\n그러기 위해선 PhotoPrism에서 제공해주는 RESTAPI 기능을 받아야 합니다.</p>\n<p>PhotoPrism은 웹어플리케이션 기능도 하면서 RESTAPI를 제공해 줍니다.\n저는 RESTAPI를 볼수 있도록 <code class=\"language-text\">swagger-ui</code>를 설치 합니다.</p>\n<p><strong>docker 를 이용해 swagger-ui를 설치합니다.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">swagger-ui</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> swaggerapi/swagger<span class=\"token punctuation\">-</span>ui\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"8080:8080\"</span>\n  <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">SWAGGER_JSON_URL</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//sonapokets.day/swagger/swagger.json\n    <span class=\"token key atrule\">CORS</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"*\"</span>\n    <span class=\"token key atrule\">SWAGGER_UI_CORS</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span>\n    <span class=\"token comment\"># 추가 설정</span>\n    <span class=\"token key atrule\">SERVER_URL</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://sonapokets.day\"</span>\n  <span class=\"token key atrule\">depends_on</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> photoprism\n  <span class=\"token key atrule\">networks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> photoprism<span class=\"token punctuation\">-</span>network</code></pre></div>","frontmatter":{"title":"토이프로젝트-디지털 앨범 만들기 Nginx + PhotoPrism + Swagger + Next.js","date":null,"description":"아이가 생기고 무수히 많은 사진과 비디오가 핸드폰에 쌓였습니다. GoogleDrive로 동기화 하며 써봤지만 Standard(200GB)가 넘으면 기분 나쁜 비용이 듭니다. 집에 있는 1TB 하드디스크에 사진을 넣고 신규 사진을 매번 카카오톡으로 가족들과 주고 받기 보단 우리가족만의 앨범을 만들고 싶어서 제작과 함께 글을 기록 합니다."}},"previous":{"fields":{"slug":"/note/spring/"},"frontmatter":{"title":"Spring Boot 실무 GUIDE"}},"next":{"fields":{"slug":"/note/Backend/"},"frontmatter":{"title":"Backend 가벼운 가이드라인"}}},"pageContext":{"id":"4905257f-8ce8-5fb9-8c18-e170102ef300","previousPostId":"0941e1f0-6790-530a-b3f8-86e41e66b4c6","nextPostId":"588d33ba-d0e7-576b-b3d1-5c1a3e669cac"}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}